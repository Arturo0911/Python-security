
import java.io.*;

/**
 * @author Arturo Negreiros
 */

public class SocketServer extends Connection {

    public SocketServer() throws IOException{
        super("server");
    }

    /**
     * TODO:
     * 
     * 
     * 
     *      - first use the model from Connection class, whenever we've the parameters protected
     *          generate the instances of ServerSocket and Socket
     *      - Then accept the connection in Socket method socket = serverSocket.accept()
     */

    public void startServer(){
        try {
            System.out.println("Waiting for connection...");
            socket = serverSocket.accept();
            System.out.println("Client on line");
            serverOut = new DataOutputStream(socket.getOutputStream());
            serverOut.writeUTF("request received and accepted");
            BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));

            while((serverMessage = input.readLine()) != null){
                System.out.println(serverMessage);
            }
            System.out.println("Connection finished");
            serverSocket.close();
        } catch (Exception e) {
            e.printStackTrace();
            System.out.println(e.toString());
        }
    }
    
}