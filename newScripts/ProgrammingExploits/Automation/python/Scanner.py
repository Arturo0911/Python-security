#!/usr/bin/python3

import socket
import getopt
import random
import sys
from IPy import IP


class Scanner:

    def __init__(self):
        self.args = sys.argv[1:]
        self.client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    
    
    def _check_host(self, host):

        try:

            IP(host)

            return host

        except ValueError as e:

            return socket.gethostbyname(host)

    # Sending data into determinade host
    def connection_with_client(self, host):
        port = 80
        self.client.connect(( str(host), port))
        self.client.send(bytes(("ABCDEFGHIJKLMNOPQRSTUVWXYZ"*500),'utf-8' ))
        response = self.client.recv(4096)
        
        print(response)
    
    
    def scanning_ports(self, host):
        
        host_checked = _check_host(host)
        print("[*] the target was selected and scanning "+str(host))
        for port in range(5000):

            self.scan_port(host_checked, port)

    def scan_port(self, host, port):

        try:
            sock = socket.socket()
            sock.settimeout(0.5)
        except Exception as e:
            print(str(e))




    def get_banner(self, s):
        
        return s.recv(1024)

    def presenting_process(self):
        
        try:
            opt, arg = getopt.getopt(self.args, "is:h:", ["info", "scan=", "host="])
            
            for o,a in opt:

                if o in ('-s', '--scan'):
                    #self.connection(a)
                    print("[*] Initializing scanner on %s"%a)
                    self.connection_with_client(a)
                

        except Exception as e:
            print("Error by: ",str(e))



if __name__ == '__main__':
    py_Scanner = Scanner()

    py_Scanner.presenting_process()


